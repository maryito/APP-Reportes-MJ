#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition

#:import label kivy.uix.label
#:import sla kivy.adapters.simplelistadapter
<Titulo@Label>
    markup: True
    font_size: 50       
    size_hint:(None, None)
    size:(100, 44)
    pos_hint:{'center_x': .5 , 'center_y': .90}

<MaButton@Button>:
    text: '123'
<MaPopup@Popup>:
    auto_dismiss: True

<User>:
	fecha: ""
	hora: ""
	estado:""
	var_consul: "-----"
	nombre:nombre
	empresa:empresa
	estado: estado
	estado_ven:estado_ven

	# variables para agregar en el modulo NEW SKU
	div: div
	cat: cat 
	subcat: subcat
	med: med 
	marca: marca 
	sku: sku
	resultado_lista:lista
	Screen:
		name: "Inicio"
		MaButton:
		    id: main_button
		    on_release: app.do_popup()
		Button:
			text: 'BIENVENIDO AL SISTEMA'
			font_size: 35
			background_color: (0, 2, 4, 6)
			on_press: 
				# root.do_popup()
				root.iniciar()
                root.current=('Menu Principal')                 
                root.transition = FadeTransition()
    Screen:    	
		name: "Menu Principal"
        BoxLayout:
            orientation: 'vertical'
            spacing: "10dp"
			font_size: "30dp"
			Button:
				text: 'Continuar Proyecto'
				on_press: root.current=('guardar')
	        Titulo:
            	text:('[b]NUEVO PROYECTO[/b]')
			Label:	        		 
				text: ("Fecha: {0} \nHora: {1}".format(root.fecha, root.hora))
			GridLayout:
				cols: 2
				rows: 2
		        Label: 
		        	text: "Nombre: "
		        TextInput:
		        	id: nombre
		        	multiline: False
		        Label: 
		        	text: "Tienda: "
		        TextInput:
		        	id: empresa
		        	multiline: False		    	    	
		    Button:  
		    	size_hint_x: 0.5
		    	pos_hint: {'center_x': 0.5}	    	
				text: 'Inicio'
				on_press: 		           
	                root.usuario() 
	                root.current=('veri_usu')
	                root.transition = FallOutTransition()
	Screen:
		name: "veri_usu"
		BoxLayout:
			orientation: 'vertical'
			spacing: "50dp"
			TextInput:
				padding: [25, 25]
				id: estado
				disabled: True   	
				spacing: "50dp"		
	        Button:  
	        	size_hint_x: 0.75
		    	pos_hint: {'center_x': 0.5}	
	        	id:estado_ven		    
				on_press: root.current=(''+estado_ven.text)
    Screen:    	
		name: "Categoria"
		BoxLayout:
			orientation: 'vertical'
			spacing: "70dp"
			font_size: "30dp"
			Button:
				spacing: "50dp"	
				size_hint_x: 0.60
	    		pos_hint: {'center_x': 0.5}	 				
				text: 'DA'
				on_press: 
					root.current=('da')
					root.transition = RiseInTransition() 
			Button:
				size_hint_x: 0.60
	    		pos_hint: {'center_x': 0.5}	 
				text: 'AV'
				on_press: 
					root.current=('av')
					root.transition = WipeTransition()
			
			Button: 
				size_hint_x: 0.75
	    		pos_hint: {'center_x': 0.5}	 	
				spacing: "50dp"			    	
				text: 'SAVE PROYECT'
				on_press: 
					root.save_db()
					root.current=('guardar')
		   #      Button:  		    	
					# text: '*NEXT'#ESTARIA DE MAS 
					# # on_press: root.current=('')
	Screen:    	
		name: "da"		
        BoxLayout:
        	orientation: 'vertical'
            spacing: "20dp"
			font_size: "30dp"
        	Titulo:
            	text:('[b]DA[/b]')			
			Button:	
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85			
				text: 'AC'
				on_press: 
					root.current=('consultando')	
					root.categoria("AC","da")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'WM'
				on_press: 
					root.current=('consultando')	
					root.categoria("WM","da")
			Button:		
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85		
				text: 'MWO'
				on_press: 
					root.current=('consultando')	
					root.categoria("MWO","da")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'AV'
				on_press: 
					root.current=('consultando')	
					root.categoria("AV","da")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'REF'
				on_press: 
					root.current=('consultando')	
					root.categoria("REF","da")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'OVEN'
				on_press: 
					root.current=('consultando')	
					root.categoria("AC","da")			
							
			Button: 
				spacing: "50dp"
				size_hint_x: 0.5
	    		pos_hint: {'center_x': 0.5}	 		    	
				text: 'ATRAS'
				on_press:  root.current=('Categoria')
		   #      Button:  		    	
					# text: '*NEXT'#ESTARIA DE MAS 
					# # on_press: root.current=('')
	Screen:    	
		name: "av"
		BoxLayout:
        	orientation: 'vertical'
            spacing: "20dp"
			font_size: "30dp"
        	Titulo:
            	text:('[b]AV[/b]')			
			Button:	
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85			
				text: 'TV'
				on_press: 
					root.current=('consultando')	
					root.categoria("TV","av")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'MINI'
				on_press: 
					root.current=('consultando')	
					root.categoria("MINI","av")
			Button:	
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85			
				text: 'MICRO'
				on_press: 
					root.current=('consultando')	
					root.categoria("MICRO","av")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'DVD'	
				on_press: 
					root.current=('consultando')	
					root.categoria("DVD","av")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'HTS'
				on_press: 
					root.current=('consultando')	
					root.categoria("HTS","av")
			Button:
				pos_hint: {'center_x': 0.5}						
				size_hint_x: 0.85
				text: 'BD'	
				on_press: 
					root.current=('consultando')	
					root.categoria("BD","av")		
			Button: 
				spacing: "50dp"
				size_hint_x: 0.5
	    		pos_hint: {'center_x': 0.5}	 		    	
				text: 'ATRAS'
				on_press:  root.current=('Categoria')
	Screen:    	
		name: "consultando"
		BoxLayout:
        	orientation: 'vertical'
            spacing: "20dp"
			font_size: "30dp"
        	Titulo:
            	text:('[b]consulta: {0}[/b]'.format(root.var_consul))			
			GridLayout:
				pos_hint: {'center_x': 0.5}	
				cols: 4				
				spacing: "20dp"
				Button:  		    	
					text: '1'
				Button:  		    	
					text: '2'
		        Button:  		    	
					text: '3'	
				Button:  		    	
					text: '4'
			Label:
				text: 'consultando'			
			GridLayout:
				cols: 3
				spacing: "40dp"
				Button:  
					size_hint_x: 0.25			    	
					text: 'ATRAS' #funcione para que regrese a submenu
					on_press: 
						 
						root.current=(''+root.name)						
						root.limpiar()
				Button:  
					size_hint_x: 0.45	    	
					text: 'NEW SKU'
					on_press:  
						root.limpiar()
						root.current=('nuevo_art')
		        Button:  
		        	size_hint_x: 0.30		    	
					text: 'SAVE'
					on_press:  
						root.current=(''+root.name)
						root.save()						
						root.limpiar()
	Screen:    			
		name: "nuevo_art"
		BoxLayout:
        	orientation: 'vertical'
            spacing: "10dp"
			font_size: "30dp"
        	Titulo:
            	text:('[b]NEW SKU[/b]')				
			Label: 
	        	text: "DIVISIÃ“N"
	        TextInput:
	        	id: div
	        	multiline: False
	        Label: 
	        	text: "CATEGORIA"
	        TextInput:
	        	id: cat
	        	multiline: False
	        Label: 
	        	text: "SUBCATEGORIA"
	        TextInput:
	        	id: subcat
	        	multiline: False
	        Label: 
	        	text: "MEDIDA "
	        TextInput:
	        	id: med
	        	multiline: False
	        Label: 
	        	text: "MARCA"
	        TextInput:
	        	id: marca
	        	multiline: False
	        Label: 
	        	text: "SKU"
	        TextInput:
	        	id: sku
	        	multiline: False
		        		
			GridLayout:
				cols: 2
				spacing: "50dp"
				Button:  		    	
					text: 'ATRAS' 
					size_hint_x: 0.35
					on_press:  
						root.current=(''+root.name)					
						root.limpiar()
				Button: 
					size_hint_x: 0.60 		    	
					text: 'SAVE NEW SKU'
					on_press:  
						root.save_new_sku()						
						root.limpiar()
						root.current=("consultando")
	Screen:		
		name: 'guardar'
		canvas.before:
	        Color:
	            rgba: (0.2, 0.2, 0.2, 1)
	        Rectangle:
	            pos: self.pos
	            size: self.size
	    BoxLayout:
	    	#aqui ira un for de botones 
	    	orientation: 'vertical'
			spacing: "20dp"
		    GridLayout:
		    	cols: 2
			    ListView:
			    	id: lista
			        size_hint: .8,.8
		    GridLayout:
				cols: 2
				spacing: "50dp"
			    Button: 
			    	size_hint_x: 0.30	 		    	
					text: 'Continuar \n Proyecto' 
					on_press:  root.current=('Categoria')
				Button:  
					size_hint_x: 0.60			    	
					text: 'SEND PROYECTO'
					on_press:  
						root.current=('Menu Principal')
			Button:  
				spacing: "50dp"	
				size_hint_x: 0.5
		    	pos_hint: {'center_x': 0.5}			    	
				text: 'ATRAS' 
				on_press:  root.current=('Categoria')